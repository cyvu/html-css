<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/css/admin-panel.css" media="all" />
    <link rel="stylesheet" href="/css/form.css" media="all" />
    <title>Project School: HTML / CSS</title>
  </head>
  <body>
    <section id="admin-panel">
      <header>
        <nav>
          <a href="#usercontrol">User Control</a>
          <a href="#img">Image</a>
          <a href="#digitalpet">Digital Pet</a>
        </nav>
      </header>
    </section>

    <section id="usercontrol">
      <h1>Administrate Users</h1>

      <!-- action page.php is wrong fix or get fixed... -->
      <form id="form-users" method="get">
        <label for="search">Search:</label>
        <input type="search" id="search" name="search" /><br /><br />
        <button type="submit" name="getUsers" value="Get Users">
          Get Users
        </button>
        <button type="submit" name="getUser" value="Get User">Get User</button>
      </form>

      <br /><br />

      <form action="" method="get">
        <label for="fetchedUsers"
          >Fetch users and add interactions for each user.</label
        >
        <ul name="fetchedUsers">
          <li>Firstname</li>
          <li>Lastname</li>
          <li>Email</li>
        </ul>
        <input type="submit" value="Add User" />
        <input type="submit" value="Update User" />
        <input type="submit" value="Destroy User" />
      </form>

      <h3>Result:</h3>
      <pre id="result"></pre>
    </section>

    <script defer>
      const form = document.querySelector("#form-users");
      const getUsers = document.getElementsByName("getUsers")[0];
      const output = document.querySelector("#result");

      async function fetchUsers() {
        try {
          await fetch("http://localhost:8000/user/1", {
            method: "GET", // GET, POST, PUT, DELETE
            headers: { "Content-Type": "application/json" },
            cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
            credentials: "include", // include, *same-origin, omit
            mode: "no-cors", // no-cors, *cors, same-origin
            redirect: "follow", // manual, follow, error
            body: null, //JSON.stringify(data), // body data type must match "Content-Type" header
          })
            .then((res) => {
              console.log(res.json())
              if (!res.ok) {
                return Promise.reject(res)
              }
              console.table("Result: ", res);
            })
            .catch((error) => {
              console.error(error);
            });
        } catch (error) {
          console.error("Fetch error: " + error);
        }
      }
      fetchUsers();

      /*
      form.addEventListener(
        "click",
        (event) => {
          event.preventDefault();

          const result = getUsers.addEventListener(
            "click",
            (event) => {
              fetch("http://localhost:8000/users", {
                method: "get",
                headers: "application/json",
                body: null,
              })
                .then((response) => {
                  if (!response.ok) {
                    throw new Error(`HTTP error: ${response.status}`);
                  }
                  console.log("response");
                  output = response.json();
                  output.innerHTML = data;
                  return response.json();
                })
                .catch((error) => {
                  console.log("error");
                  textarea.innerHTML = `Error: ${error}`;
                });
              event.preventDefault();
            },
            false
          );
        },
        false
      );
      */
    </script>
  </body>
</html>
